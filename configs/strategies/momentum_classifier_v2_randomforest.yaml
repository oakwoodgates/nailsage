# Strategy metadata
strategy_name: momentum_classifier
version: v2_randomforest
strategy_timeframe: short_term
description: "Momentum classifier with Random Forest - non-boosting baseline for comparison"

# Data configuration
data:
  source_file: "merged_binance_BTC_USDT_perps_1m_20251116_014156.parquet"
  resample_interval: "15min"  # Resample from 1m to 15m
  train_start: "2024-11-16"   # Start of data
  train_end: "2025-08-15"     # 9 months for training
  validation_start: "2025-08-16"  # Last 3 months for validation
  validation_end: "2025-11-15"    # End of data

# Feature configuration
features:
  indicators:
    # Moving averages
    - name: ema_12
      type: EMA
      params: {window: 12}
    - name: ema_26
      type: EMA
      params: {window: 26}
    - name: ema_50
      type: EMA
      params: {window: 50}

    # Momentum
    - name: rsi_14
      type: RSI
      params: {window: 14}
    - name: macd
      type: MACD
      params: {fast: 12, slow: 26, signal: 9}
    - name: roc_10
      type: ROC
      params: {window: 10}

    # Volatility
    - name: bollinger
      type: BollingerBands
      params: {window: 20, num_std: 2}
    - name: atr_14
      type: ATR
      params: {window: 14}

    # Volume
    - name: volume_ma_20
      type: VolumeMA
      params: {window: 20}

# Target variable configuration
target:
  type: classification
  classes: 3  # Short (0), Neutral (1), Long (2)
  lookahead_bars: 4  # Predict 4 bars ahead (1 hour on 15min data)
  threshold_pct: 0.5  # 0.5% move threshold for long/short
  class_weights: {0: 5.0, 1: 1.0, 2: 5.0}  # Short/Long 5x more important

# Model configuration (Random Forest)
model:
  type: random_forest
  params:
    n_estimators: 200
    max_depth: 7
    min_samples_split: 3
    min_samples_leaf: 1
    max_features: "sqrt"  # sqrt(n_features) for each split
    random_state: 42
    n_jobs: -1  # Use all CPU cores
    class_weight: "balanced"  # Handle class imbalance

# Validation configuration
validation:
  method: walk_forward
  n_splits: 4
  expanding_window: true
  gap_bars: 0

# Backtest configuration
backtest:
  transaction_cost_pct: 0.04  # 0.04% taker fee
  slippage_bps: 2  # 2 basis points
  leverage: 3  # 3x leverage
  capital: 10000  # Starting capital (USDT)

# Risk configuration
risk:
  max_position_size_pct: 100  # 100% of capital (with leverage)
  stop_loss_pct: 2.0  # 2% stop loss
  take_profit_pct: 3.0  # 3% take profit
