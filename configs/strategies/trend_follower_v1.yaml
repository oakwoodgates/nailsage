# Strategy metadata
strategy_name: trend_follower
version: v1
strategy_timeframe: short_term
description: "Trend-following with aggressive class weights to generate trades"

# Data configuration
data:
  source_file: "merged_binance_BTC_USDT_perps_1m_20251116_014156.parquet"
  resample_interval: "15min"
  train_start: "2024-11-16"
  train_end: "2025-08-15"
  validation_start: "2025-08-16"
  validation_end: "2025-11-15"

# Feature configuration - trend-focused indicators
features:
  indicators:
    # Trend EMAs
    - name: ema_9
      type: EMA
      params: {window: 9}
    - name: ema_21
      type: EMA
      params: {window: 21}
    - name: ema_50
      type: EMA
      params: {window: 50}
    - name: ema_100
      type: EMA
      params: {window: 100}

    # Momentum
    - name: rsi_14
      type: RSI
      params: {window: 14}
    - name: macd
      type: MACD
      params: {fast: 12, slow: 26, signal: 9}
    - name: roc_5
      type: ROC
      params: {window: 5}
    - name: roc_20
      type: ROC
      params: {window: 20}

    # Volatility
    - name: bollinger
      type: BollingerBands
      params: {window: 20, num_std: 2}
    - name: atr_14
      type: ATR
      params: {window: 14}

    # Volume
    - name: volume_ma_20
      type: VolumeMA
      params: {window: 20}

# Target - 8-bar lookahead (2 hours) with aggressive weighting
target:
  type: classification
  classes: 3
  lookahead_bars: 8
  threshold_pct: 0.3  # Lower threshold to capture more moves
  class_weights: {0: 10.0, 1: 1.0, 2: 10.0}  # 10x weight on action classes

# Model - LightGBM for speed
model:
  type: lightgbm
  params:
    objective: "multiclass"
    num_class: 3
    max_depth: 6
    learning_rate: 0.05
    n_estimators: 300
    num_leaves: 31
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_samples: 20
    random_state: 42
    verbose: -1

# Validation
validation:
  method: walk_forward
  n_splits: 4
  expanding_window: true
  gap_bars: 0

# Backtest
backtest:
  transaction_cost_pct: 0.04
  slippage_bps: 2
  leverage: 3
  capital: 10000

# Risk
risk:
  max_position_size_pct: 100
  stop_loss_pct: 1.5
  take_profit_pct: 2.5
