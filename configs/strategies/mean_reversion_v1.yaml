# Strategy metadata
strategy_name: mean_reversion
version: v1
strategy_timeframe: short_term
description: "Mean reversion on RSI extremes with quick exits"

# Data configuration
data:
  source_file: "merged_binance_BTC_USDT_perps_1m_20251116_014156.parquet"
  resample_interval: "15min"
  train_start: "2024-11-16"
  train_end: "2025-08-15"
  validation_start: "2025-08-16"
  validation_end: "2025-11-15"

# Feature configuration - mean reversion focused
features:
  indicators:
    # Overbought/Oversold
    - name: rsi_7
      type: RSI
      params: {window: 7}
    - name: rsi_14
      type: RSI
      params: {window: 14}

    # Bollinger for deviation from mean
    - name: bollinger
      type: BollingerBands
      params: {window: 20, num_std: 2}
    - name: bollinger_tight
      type: BollingerBands
      params: {window: 10, num_std: 1.5}

    # Moving averages for mean reference
    - name: ema_10
      type: EMA
      params: {window: 10}
    - name: ema_20
      type: EMA
      params: {window: 20}
    - name: sma_50
      type: SMA
      params: {window: 50}

    # Momentum divergence
    - name: macd
      type: MACD
      params: {fast: 8, slow: 17, signal: 9}
    - name: roc_3
      type: ROC
      params: {window: 3}

    # Volatility for entry timing
    - name: atr_10
      type: ATR
      params: {window: 10}

    # Volume confirmation
    - name: volume_ma_10
      type: VolumeMA
      params: {window: 10}

# Target - short lookahead for quick mean reversion
target:
  type: classification
  classes: 3
  lookahead_bars: 2  # 30 min for quick reversion
  threshold_pct: 0.25  # Smaller threshold, more signals
  class_weights: {0: 15.0, 1: 1.0, 2: 15.0}  # Very aggressive weighting

# Model - XGBoost
model:
  type: xgboost
  params:
    objective: "multi:softmax"
    num_class: 3
    max_depth: 5
    learning_rate: 0.03
    n_estimators: 250
    subsample: 0.7
    colsample_bytree: 0.7
    min_child_weight: 5
    gamma: 0.1
    random_state: 42

# Validation
validation:
  method: walk_forward
  n_splits: 4
  expanding_window: true
  gap_bars: 0

# Backtest
backtest:
  transaction_cost_pct: 0.04
  slippage_bps: 2
  leverage: 2  # Lower leverage for mean reversion
  capital: 10000

# Risk - tighter stops for mean reversion
risk:
  max_position_size_pct: 100
  stop_loss_pct: 1.0
  take_profit_pct: 1.5
